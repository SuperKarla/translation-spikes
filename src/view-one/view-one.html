<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">

<link rel="import" href="./poeditor-helper.html">


<dom-module id="view-one">
    <template>

        <paper-dropdown-menu label="Projects">
            <paper-listbox class="dropdown-content">
                <template is="dom-repeat" items="{{_projects}}">
                    <paper-item>[[item.name]] ([[item.id]])</paper-item>
                </template>
            </paper-listbox>
        </paper-dropdown-menu>

        <paper-dropdown-menu label="Language">
            <paper-listbox class="dropdown-content">
                <template is="dom-repeat" items="{{_languages}}">
                    <paper-item>[[item.short]] ([[item.long]])</paper-item>
                </template>
            </paper-listbox>
        </paper-dropdown-menu>

        <paper-input label="term"></paper-input>
        <paper-button primary raised>New project</paper-button>
        <paper-button raised>Add language</paper-button>
        <paper-button raised on-tap="sendXMLHttpRequest">Export po file</paper-button>

    </template>
    <script>
        Polymer({
            is: 'view-one',
            properties: {
                _language: {
                    type: String,
                    notify: true
                },
                _languages: {
                    type: Array,
                    value: [{ short: 'da', long: 'danish' }, { short: 'en-us', long: 'english-us' }, { short: 'de', long: 'german' }]
                },
                _projects: {
                    type: Array
                }
            },
            behaviors: [PoeditorHelper],

            ready: function () {
                this.getProjectList()
                    .then(res => {
                        console.log(res);
                        this._projects = res.list;
                    })
                    .catch(err => {
                        console.log(err)
                    });
            }
        });
    </script>

</dom-module>